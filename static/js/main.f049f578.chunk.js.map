{"version":3,"sources":["services/moviesApi.jsx","components/Search.jsx","components/MoviesList.jsx","components/MovieItem.jsx","components/App.jsx","index.jsx"],"names":["this","apiKey","baseUrl","imageBaseUrl","fetch","response","json","sessionID","query","page","sessionIDFiled","queryFiled","console","log","width","path","Search","loadData","disabled","useState","searchValue","setsearchValue","deb","debounce","className","placeholder","value","onChange","event","target","handleSearchValue","MoviesList","children","currentPage","setPage","size","total","current","MovieItem","data","rateColor","setRateColor","title","posterPath","poster_path","releaseDate","release_date","overview","voteAverage","vote_average","Paragraph","Typography","useEffect","img","src","moviesApi","getImagePath","alt","date","format","Date","cover","bodyStyle","padding","bordered","style","borderColor","ellipsis","rows","expandable","symbol","count","allowHalf","App","setSessionID","sort","setSort","setData","a","getSearchList","list","results","createGuestSession","session","guest_session_id","asyncFunc","Content","Layout","TabPane","Tabs","centered","onTabClick","key","tab","map","movie","id","ReactDOM","render","document","getElementById"],"mappings":"2SA4Be,M,WA3Bb,aAAe,oBACbA,KAAKC,OAAS,mCACdD,KAAKE,QAAU,+BACfF,KAAKG,aAAe,6B,iMAIGC,MAAM,GAAD,OACvBJ,KAAKE,QADkB,qDACkCF,KAAKC,S,cAD7DI,E,gBAGOA,EAASC,O,2NAEJC,G,kGAAWC,E,+BAAQ,IAAKC,E,+BAAO,EAC3CC,EAAiBH,EAAS,sBAAkBA,GAAc,GAC1DI,EAAuB,KAAVH,EAAeA,EAAQ,IAC1CI,QAAQC,IAAI,aAAcN,EAAWG,G,SACdN,MAAM,GAAD,OACvBJ,KAAKE,QADkB,iCACcF,KAAKC,QADnB,OAC4BS,EAD5B,kBACoDC,EADpD,iBACuEF,I,cAD7FJ,E,iBAGOA,EAASC,O,oLAEXQ,EAAOC,GAGlB,OAAgB,OAATA,EAAA,UAAmBf,KAAKG,aAAxB,aAAyCW,GAAzC,OAAiDC,GADtD,mF,yCCpBS,SAASC,EAAT,GAAyC,IAAvBC,EAAsB,EAAtBA,SAAUC,EAAY,EAAZA,SAAY,EACfC,mBAAS,IADM,mBAC9CC,EAD8C,KACjCC,EADiC,KAK/CC,EAAMC,mBAASN,EAAU,KAC/B,OACE,kBAAC,IAAD,CACEO,UAAU,SACVC,YAAY,oBACZP,SAAUA,EACVQ,MAAON,EACPO,SAAU,SAACC,IAVW,SAACA,GACzBP,EAAeO,EAAMC,OAAOH,OAUxBI,CAAkBF,GAClBN,EAAIM,EAAMC,OAAOH,U,aCfV,SAASK,EAAT,GAKX,IAJFC,EAIC,EAJDA,SACAR,EAGC,EAHDA,UACAS,EAEC,EAFDA,YACAC,EACC,EADDA,QAEA,OACE,oCACE,wBAAIV,UAAWA,GAAYQ,GAC3B,kBAAC,IAAD,CACER,UAAU,aACVW,KAAK,QACLC,MAAO,GACPC,QAASJ,EACTN,SAAUO,K,iDCZH,SAASI,EAAT,GAAyC,IAApBd,EAAmB,EAAnBA,UAAWe,EAAQ,EAARA,KAAQ,EACnBpB,mBAAS,SADU,mBAC9CqB,EAD8C,KACnCC,EADmC,KAInDC,EAKEH,EALFG,MACaC,EAIXJ,EAJFK,YACcC,EAGZN,EAHFO,aACAC,EAEER,EAFFQ,SACcC,EACZT,EADFU,aAEMC,EAAcC,IAAdD,UAERE,qBAAU,WACJJ,GAAe,GAAKA,EAAc,GACpCP,EAAa,WAEXO,GAAe,GAAKA,EAAc,GACpCP,EAAa,WAEXO,GAAe,GAAKA,EAAc,GACpCP,EAAa,WAEXO,GAAe,GACjBP,EAAa,aAEd,CAACO,IACJ,IAAMK,EACJ,yBAAKC,IAAKC,EAAUC,aAAa,IAAKb,GAAac,IAAKlB,EAAKG,QAEzDgB,EAAOb,EACTc,YAAO,IAAIC,KAAKf,GAAc,gBAC9B,QACJ,OACE,kBAAC,IAAD,CACErB,UAAWA,EACXqC,MAAOR,EACPS,UAAW,CAAEC,QAAS,aACtBC,UAAU,GAEV,yBAAKxC,UAAU,qBACb,wBAAIA,UAAU,oBAAoBkB,GAClC,yBACElB,UAAU,yBACVyC,MAAO,CAAEC,YAAa1B,IAErBQ,IAGL,uBAAGxB,UAAU,mBAAmBkC,GAChC,yBAAKlC,UAAU,0BACb,kBAAC,IAAD,CAAKA,UAAU,kBAAf,UACA,kBAAC,IAAD,CAAKA,UAAU,kBAAf,UAEF,kBAAC0B,EAAD,CACE1B,UAAU,sBACV2C,SAAU,CAAEC,KAAM,EAAGC,YAAY,EAAMC,OAAQ,SAE9CvB,GAEH,kBAAC,IAAD,CACEvB,UAAU,wBACV+C,MAAO,GACP7C,MAAOsB,EACPwB,WAAS,KCAFC,MA3Df,WAAgB,IAAD,EACqBtD,mBAAS,IAD9B,mBACNZ,EADM,KACKmE,EADL,OAEWvD,mBAAS,UAFpB,mBAENwD,EAFM,KAEAC,EAFA,OAGWzD,mBAAS,IAHpB,mBAGNoB,EAHM,KAGAsC,EAHA,OAIkB1D,mBAAS,GAJ3B,mBAINc,EAJM,KAIOC,EAJP,cAoBEjB,EApBF,8EAoBb,WAAwBT,GAAxB,eAAAsE,EAAA,sEACqBvB,EAAUwB,cAAcxE,EAAWC,EAAOyB,GAD/D,OACQ+C,EADR,OAEEH,EAAQG,EAAKC,SAFf,4CApBa,sBAMb7B,qBAAU,WAAM,4CAEd,4BAAA0B,EAAA,sEACwBvB,EAAU2B,qBADlC,cACQC,EADR,gBAEQT,EAAaS,EAAQC,kBAF7B,4CAFc,sBACdxE,QAAQC,IAAI,kBADE,mCAMdwE,KACC,IAEHjC,qBAAU,WACRxC,QAAQC,IAAI,kBACZI,MACC,CAACgB,EAAa0C,IAlBJ,IAyBLW,EAAYC,IAAZD,QACAE,EAAYC,IAAZD,QAER,OADA5E,QAAQC,IAAI,UAEV,yBAAKW,UAAU,OACb,kBAAC,IAAD,CAAQA,UAAU,UAChB,kBAAC8D,EAAD,CAAS9D,UAAU,WACjB,kBAAC,IAAD,CACEA,UAAU,OACVW,KAAK,QACLuD,UAAU,EACVC,WAAY,SAACC,GAAD,OAAShB,EAAQgB,KAE7B,kBAACJ,EAAD,CAASK,IAAI,SAASD,IAAI,WAC1B,kBAACJ,EAAD,CAASK,IAAI,QAAQD,IAAI,WAE3B,kBAAC5E,EAAD,CAAQC,SAAUA,EAAUC,SAAmB,UAATyD,IACtC,kBAAC5C,EAAD,CACEP,UAAU,aACVS,YAAaA,EACbC,QAAS,SAACzB,GAAD,OAAUyB,EAAQzB,KAE1B8B,EAAKuD,KAAI,SAACC,GAAD,OACR,wBAAIvE,UAAU,eAAeoE,IAAKG,EAAMC,IACtC,kBAAC1D,EAAD,CAAWd,UAAU,YAAYe,KAAMwD,aCpDvDE,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.f049f578.chunk.js","sourcesContent":["class MoviesApi {\n  constructor() {\n    this.apiKey = \"e3cafce94e3a863833765608b4d85428\";\n    this.baseUrl = \"https://api.themoviedb.org/3\";\n    this.imageBaseUrl = \"https://image.tmdb.org/t/p\";\n  }\n\n  async createGuestSession() {\n    const response = await fetch(\n      `${this.baseUrl}/authentication/guest_session/new?api_key=${this.apiKey}`\n    );\n    return await response.json();\n  }\n  async getSearchList(sessionID, query = \"a\", page = 1) {\n    const sessionIDFiled = sessionID ? `&seisson_id=${sessionID}` : \"\";\n    const queryFiled = query !== \"\" ? query : \"a\";\n    console.log(\"ID in API:\", sessionID, sessionIDFiled);\n    const response = await fetch(\n      `${this.baseUrl}/search/movie?api_key=${this.apiKey}${sessionIDFiled}&query=${queryFiled}&page=${page}`\n    );\n    return await response.json();\n  }\n  getImagePath(width, path) {\n    const errorImg =\n      \"https://avatanplus.com/files/resources/original/57b1a0f710a0b1568ddcc51c.jpg\";\n    return path !== null ? `${this.imageBaseUrl}/w${width}${path}` : errorImg;\n  }\n}\nexport default new MoviesApi();\n","import React, { useState } from \"react\";\nimport { debounce } from \"lodash\";\nimport { Input } from \"antd\";\n\nexport default function Search({ loadData, disabled }) {\n  const [searchValue, setsearchValue] = useState(\"\");\n  const handleSearchValue = (event) => {\n    setsearchValue(event.target.value);\n  };\n  const deb = debounce(loadData, 1000);\n  return (\n    <Input\n      className=\"Search\"\n      placeholder=\"Type to search...\"\n      disabled={disabled}\n      value={searchValue}\n      onChange={(event) => {\n        handleSearchValue(event);\n        deb(event.target.value);\n      }}\n    />\n  );\n}\n","import React from \"react\";\nimport { Pagination } from \"antd\";\n\nexport default function MoviesList({\n  children,\n  className,\n  currentPage,\n  setPage,\n}) {\n  return (\n    <>\n      <ul className={className}>{children}</ul>\n      <Pagination\n        className=\"Pagination\"\n        size=\"small\"\n        total={50}\n        current={currentPage}\n        onChange={setPage}\n      />\n    </>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { format } from \"date-fns\";\nimport moviesApi from \"../services/moviesApi\";\nimport { Card, Tag, Typography, Rate } from \"antd\";\n\nexport default function MovieItem({ className, data }) {\n  const [rateColor, setRateColor] = useState(\"black\");\n\n  const {\n    title,\n    poster_path: posterPath,\n    release_date: releaseDate,\n    overview,\n    vote_average: voteAverage,\n  } = data;\n  const { Paragraph } = Typography;\n\n  useEffect(() => {\n    if (voteAverage >= 0 && voteAverage < 3) {\n      setRateColor(\"#E90000\");\n    }\n    if (voteAverage >= 3 && voteAverage < 5) {\n      setRateColor(\"#E97E00\");\n    }\n    if (voteAverage >= 5 && voteAverage < 7) {\n      setRateColor(\"#E9D100\");\n    }\n    if (voteAverage >= 7) {\n      setRateColor(\"#66E900\");\n    }\n  }, [voteAverage]);\n  const img = (\n    <img src={moviesApi.getImagePath(185, posterPath)} alt={data.title} />\n  );\n  const date = releaseDate\n    ? format(new Date(releaseDate), \"MMMM d, yyyy\")\n    : \"-/-/-\";\n  return (\n    <Card\n      className={className}\n      cover={img}\n      bodyStyle={{ padding: \"10px 20px\" }}\n      bordered={false}\n    >\n      <div className=\"MovieItem__header\">\n        <h3 className=\"MovieItem__title\">{title}</h3>\n        <div\n          className=\"MovieItem__rate-circle\"\n          style={{ borderColor: rateColor }}\n        >\n          {voteAverage}\n        </div>\n      </div>\n      <p className=\"MovieItem__date\">{date}</p>\n      <div className=\"MovieItem__tag-wrapper\">\n        <Tag className=\"MovieItem__tag\">Action</Tag>\n        <Tag className=\"MovieItem__tag\">Drama</Tag>\n      </div>\n      <Paragraph\n        className=\"MovieItem__overview\"\n        ellipsis={{ rows: 5, expandable: true, symbol: \"more\" }}\n      >\n        {overview}\n      </Paragraph>\n      <Rate\n        className=\"MovieItem__rate-stars\"\n        count={10}\n        value={voteAverage}\n        allowHalf\n      />\n    </Card>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport \"antd/dist/antd.css\";\nimport moviesApi from \"../services/moviesApi\";\nimport { Layout, Tabs } from \"antd\";\nimport Search from \"./Search\";\nimport MoviesList from \"./MoviesList\";\nimport MovieItem from \"./MovieItem\";\n\nfunction App() {\n  const [sessionID, setSessionID] = useState(\"\");\n  const [sort, setSort] = useState(\"search\");\n  const [data, setData] = useState([]);\n  const [currentPage, setPage] = useState(1);\n\n  useEffect(() => {\n    console.log(\"useEffect init\");\n    async function asyncFunc() {\n      const session = await moviesApi.createGuestSession();\n      await setSessionID(session.guest_session_id);\n    }\n    asyncFunc();\n  }, []);\n\n  useEffect(() => {\n    console.log(\"useEffect Page\");\n    loadData();\n  }, [currentPage, sort]);\n\n  async function loadData(query) {\n    const list = await moviesApi.getSearchList(sessionID, query, currentPage);\n    setData(list.results);\n  }\n\n  const { Content } = Layout;\n  const { TabPane } = Tabs;\n  console.log(\"render\");\n  return (\n    <div className=\"App\">\n      <Layout className=\"Layout\">\n        <Content className=\"Content\">\n          <Tabs\n            className=\"Tabs\"\n            size=\"large\"\n            centered={true}\n            onTabClick={(key) => setSort(key)}\n          >\n            <TabPane tab=\"Search\" key=\"search\" />\n            <TabPane tab=\"Rated\" key=\"rated\" />\n          </Tabs>\n          <Search loadData={loadData} disabled={sort === \"rated\"} />\n          <MoviesList\n            className=\"MoviesList\"\n            currentPage={currentPage}\n            setPage={(page) => setPage(page)}\n          >\n            {data.map((movie) => (\n              <li className=\"li-MovieItem\" key={movie.id}>\n                <MovieItem className=\"MovieItem\" data={movie} />\n              </li>\n            ))}\n          </MoviesList>\n        </Content>\n      </Layout>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n// import defaultData from \"./services/default-data\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}